# Better ls
alias l="ls -lha"

# cd up!
alias ..="cd .."
alias ...="cd ../.."
alias ....="cd ../../.."

alias rm="trash"

# Count files under folders
alias count='for i in *; do [ -d "$i" ] && echo "$i `find "$i" | grep -v .svn | wc -l`"; done | sort -k2 -n'

# Start a simple HTTP server in current dir
alias serve="python -m SimpleHTTPServer"
#alias serve="python -m http.server"

# Cursor
alias hide-cursor="tput civis"
alias show-cursor="tput cnorm"

# App links
#alias vi="/usr/bin/vim"
#alias vim="/usr/local/bin/mvim"
alias ack='ACK_PAGER_COLOR="less -x4SRFX" /usr/local/bin/ack'
alias gitx="open /opt/homebrew-cask/Caskroom/ssp-gitx/0.12/GitX.app --args `pwd`"
alias firefox-profile="/Applications/Firefox.app/Contents/MacOS/firefox -profilemanager"
alias vlc="/Applications/VLC.app/Contents/MacOS/VLC"
alias gource='gource --multi-sampling --seconds-per-day 3 --loop --key --user-image-dir .git/avatar/ --follow-user "Seb Flippence"'

alias notify="osascript -e 'display notification \"Done!\" with title \"iTerm\"'"

# Git
alias git-list-merged-branches='git branch -vv | grep '"'"'origin/.*: gone]'"'"' | awk '"'"'{print $1}'"'"''
alias gdmb='git-list-merged-branches | xargs git branch -D'
alias git-purge="git fetch --all -p && gdmb"
alias gp="git pull origin && gdmb"
alias gstash="git stash -u && git status"
alias gpop="git stash pop && git status"
alias gignored="git clean -fdXn | sed -e 's/Would remove //g'"
alias gclean="git clean -fdXi"
alias git branch -vv | awk '/origin\/.*: gone]/{print$1}'
alias gms="git merge --squash"
alias gcmsgc="git log -1 --pretty=%B | pbcopy"
alias gspell="mkdir -p .git/hooks && touch .git/hooks/commit-msg && cat ~/.bash/bin/commit-msg .git/hooks/commit-msg > .git/hooks/commit-msg.new; mv -f .git/hooks/commit-msg.new .git/hooks/commit-msg && chmod +x .git/hooks/commit-msg"

# Docker
alias fig="docker-compose"
alias fig-kill-rm="fig kill && fig rm -f"
alias docker-restart-stopped="docker restart \$(docker ps -a -q -f status=exited)"
alias docker-rm-stopped="docker rm -v \$(docker ps -a -q -f status=exited)"
alias docker-rm-untagged-images="docker rmi \$(docker images -f 'dangling=true' -q)"
alias docker-gc="docker run --rm -v /var/run/docker.sock:/var/run/docker.sock -v /etc:/etc spotify/docker-gc"
alias docker-nginx-proxy="docker run -d --name nginx-proxy -p 80:80 --restart="always" -v /var/run/docker.sock:/tmp/docker.sock:ro jwilder/nginx-proxy"

# Updates, Homebrew & Cask
alias update='brew-up'
alias brew-up='brew update && brew upgrade && brew upgrade --cask && brew cleanup'
alias brew-fix='sudo chown -R $USER /usr/local'
alias mac-up='sudo softwareupdate --install --all'
alias atom-up='apm update --confirm false'
alias nvm-up='nvm install node && nvm alias default node'

# Code
alias y='yarn'
alias yr='jq .scripts package.json'
alias rm-node-modules='find . -name "node_modules" -type d -prune -exec rm -rf "{}" +'
alias xmlpp='xmllint --format -'
alias phpcs="find . -name *.php -exec phpcs --standard=Zend '{}' \;"

# Others
eval $(thefuck --alias)
alias please="fuck"
alias change-ssh-pw='ssh-keygen -f ~/.ssh/id_rsa -p'
alias weather='curl -4 wttr.in/London'
alias parrot='curl parrot.live'

alias write-speed="time dd if=/dev/zero bs=1024k of=tstfile count=1024"
alias read-speed="time dd if=tstfile bs=1024k of=/dev/null count=1024"

alias gpg-restart="killall gpg-agent && gpg_init"
alias encrypt="gpg -c"
alias decrypt="gpg"

alias ssh-passwd='ssh-keygen -f ~/.ssh/id_rsa -p'
alias weather='curl -4 wttr.in/London'

alias mov2mp4="for i in *.mov; do ffmpeg -i \"$i\" -c:v libx264 -crf 23 -profile:v main -pix_fmt yuv420p -c:a aac -ac 2 -b:a 128k -movflags faststart \"${i%.*}.mp4\"; done"
